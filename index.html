<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Campañas de Facebook</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal-enter { animation: modal-in 0.3s ease-out; }
        .modal-leave { animation: modal-out 0.3s ease-in; }
        @keyframes modal-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes modal-out {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }
        /* Estilo para campos de solo lectura */
        input:read-only {
            background-color: #374151; /* bg-gray-600/50 */
            color: #9ca3af; /* text-gray-400 */
            cursor: not-allowed;
        }
        /* Ocultar flechas en input de tipo number */
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 antialiased">

    <!-- Contenedor Principal -->
    <div id="app-container">

        <!-- Página de Inicio de Sesión (sin cambios) -->
        <div id="login-page" class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800 p-4">
            <div class="w-full max-w-md mx-auto">
                <div class="bg-gray-800 border border-gray-700 shadow-2xl rounded-2xl p-8 mb-4">
                    <div class="text-center mb-8">
                        <h1 class="text-3xl font-bold text-white">Bienvenido</h1>
                        <p class="text-gray-400">Inicia sesión para gestionar tus campañas</p>
                    </div>
                    <form id="login-form">
                        <div class="mb-4">
                            <label class="block text-gray-400 text-sm font-bold mb-2" for="username">Usuario</label>
                            <input class="shadow-inner appearance-none border border-gray-600 rounded-lg w-full py-3 px-4 bg-gray-700 text-gray-200 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" id="username" type="text" placeholder="Tu usuario" required>
                        </div>
                        <div class="mb-6">
                            <label class="block text-gray-400 text-sm font-bold mb-2" for="password">Contraseña</label>
                            <input class="shadow-inner appearance-none border border-gray-600 rounded-lg w-full py-3 px-4 bg-gray-700 text-gray-200 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500" id="password" type="password" placeholder="******************" required>
                        </div>
                        <div id="error-message" class="text-red-500 text-center text-sm mb-4 h-5"></div>
                        <div class="flex items-center justify-between">
                            <button class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-all duration-300 transform hover:scale-105" type="submit">
                                Iniciar Sesión
                            </button>
                        </div>
                    </form>
                </div>
                <p class="text-center text-gray-500 text-xs">&copy;2024 Gestor de Campañas. Todos los derechos reservados.</p>
            </div>
        </div>

        <!-- Panel de Control (Dashboard) -->
        <div id="dashboard-page" class="hidden fade-in">
            <!-- Barra de Navegación (sin cambios) -->
            <header class="bg-gray-800/80 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-10">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="flex items-center justify-between h-16">
                        <div class="flex items-center"><span class="font-bold text-xl text-white">Mi Panel</span></div>
                        <div class="flex items-center space-x-4">
                            <div class="text-right">
                                <p class="text-sm font-medium text-white" id="user-name-display">Usuario</p>
                                <p class="text-xs text-gray-400" id="user-city-display">Ciudad</p>
                            </div>
                            <button id="logout-button" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">Salir</button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Contenido Principal -->
            <main class="container mx-auto p-4 sm:p-6 lg:p-8">
                <h2 class="text-3xl font-bold text-white mb-6" id="welcome-message">Bienvenido de nuevo</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gray-800 p-6 rounded-xl border border-gray-700"><h3 class="text-lg font-semibold text-gray-400 mb-2">WhatsApp</h3><p class="text-2xl font-bold text-white" id="user-whatsapp-display">-</p></div>
                    <div class="bg-gray-800 p-6 rounded-xl border border-gray-700"><h3 class="text-lg font-semibold text-gray-400 mb-2">Ciudad</h3><p class="text-2xl font-bold text-white" id="user-city-display-card">-</p></div>
                    <div class="bg-gray-800 p-6 rounded-xl border border-gray-700"><h3 class="text-lg font-semibold text-gray-400 mb-2">Material (Diseñador)</h3><p class="text-2xl font-bold text-white" id="user-material-display">-</p></div>
                </div>
                <div class="bg-gray-800 p-4 sm:p-6 rounded-xl border border-gray-700">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-white">Mis Campañas</h3>
                        <button id="new-campaign-btn" class="hidden bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300">+ Nueva Campaña</button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-700">
                            <thead class="bg-gray-700/50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Campaña</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Estado</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Presupuesto</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">Resultados</th>
                                    <th scope="col" class="relative px-6 py-3"><span class="sr-only">Editar</span></th>
                                </tr>
                            </thead>
                            <tbody class="bg-gray-800 divide-y divide-gray-700">
                                <!-- Filas de ejemplo -->
                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Lanzamiento Verano 2024</td><td class="px-6 py-4 whitespace-nowrap text-sm"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-200 text-green-800">Activa</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">$500.00</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">1,250 Clics</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><a href="#" class="text-blue-400 hover:text-blue-300">Editar</a></td></tr>
                                <tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">Promo Día del Padre</td><td class="px-6 py-4 whitespace-nowrap text-sm"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-500 text-gray-100">Pausada</span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">$200.00</td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">340 Leads</td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><a href="#" class="text-blue-400 hover:text-blue-300">Editar</a></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- MODAL PARA NUEVA CAMPAÑA -->
    <div id="campaign-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div id="modal-content" class="bg-gray-800 rounded-2xl shadow-xl w-full max-w-3xl max-h-full overflow-y-auto p-8 border border-gray-700">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white">Crear Nueva Campaña</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white text-3xl leading-none">&times;</button>
            </div>
            <form id="new-campaign-form" autocomplete="off">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    <!-- Columna 1 -->
                    <div>
                        <div class="mb-4"><label for="campaign-name" class="block text-sm font-medium text-gray-300 mb-1">Nombre de la campaña</label><input type="text" id="campaign-name" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" required></div>
                        <div class="mb-4"><label for="offer-type" class="block text-sm font-medium text-gray-300 mb-1">Tipo de oferta</label><select id="offer-type" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"><option>Combo</option><option>Tricombo</option><option>Producto Solo</option></select></div>
                        <div class="mb-4"><label for="status" class="block text-sm font-medium text-gray-300 mb-1">Estado</label><select id="status" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"><option>Sin Información</option><option>Activo</option><option>Desactivado</option><option>Programado</option><option>Finalizado</option></select></div>
                        <div class="mb-4"><label for="performance" class="block text-sm font-medium text-gray-300 mb-1">Rendimiento</label><select id="performance" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"><option>Sin Información</option><option>Alto</option><option>Medio</option><option>Bajo</option></select></div>
                        <div class="mb-4"><label for="cpr" class="block text-sm font-medium text-gray-300 mb-1">CPR (Costo por Resultado)</label><input type="number" step="0.01" id="cpr" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" value="0.5" required></div>
                    </div>
                    <!-- Columna 2 -->
                    <div>
                        <!-- Autocomplete para Asesora -->
                        <div class="relative mb-4">
                            <label for="advisor-input" class="block text-sm font-medium text-gray-300 mb-1">Asesora</label>
                            <input type="text" id="advisor-input" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Escribe para buscar asesora..." required>
                            <div id="advisor-suggestions" class="hidden absolute z-20 w-full bg-gray-600 border border-gray-500 rounded-md mt-1 max-h-48 overflow-y-auto shadow-lg"></div>
                        </div>
                        <!-- Usuario de la Asesora (Automático) -->
                        <div class="mb-4">
                            <label for="registering-user" class="block text-sm font-medium text-gray-300 mb-1">Usuario de la Asesora</label>
                            <input type="text" id="registering-user" class="w-full border border-gray-600 rounded-lg px-3 py-2 focus:outline-none" placeholder="Se rellena al elegir asesora" readonly>
                        </div>
                        <div class="mb-4"><label for="whatsapp-display-modal" class="block text-sm font-medium text-gray-300 mb-1">WhatsApp de Asesora</label><input type="text" id="whatsapp-display-modal" class="w-full border border-gray-600 rounded-lg px-3 py-2 focus:outline-none" readonly></div>
                        <div class="mb-4"><label for="material-designer" class="block text-sm font-medium text-gray-300 mb-1">Material (Diseñador)</label><input type="text" id="material-designer" class="w-full border border-gray-600 rounded-lg px-3 py-2 focus:outline-none" readonly required></div>
                        <!-- Ciudad (autocompletado) -->
                        <div class="mb-4">
                            <label for="city-input" class="block text-sm font-medium text-gray-300 mb-1">Ciudad (Sucursal)</label>
                            <input type="text" id="city-input" class="w-full border border-gray-600 rounded-lg px-3 py-2 focus:outline-none" placeholder="Se rellena al elegir asesora" readonly required>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                           <div class="mb-4"><label for="start-date" class="block text-sm font-medium text-gray-300 mb-1">Inicio</label><input type="date" id="start-date" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" required></div>
                           <div class="mb-4"><label for="end-date" class="block text-sm font-medium text-gray-300 mb-1">Fin</label><input type="date" id="end-date" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-8 flex justify-end">
                    <button type="button" id="cancel-btn" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg mr-4">Cancelar</button>
                    <button type="submit" id="save-campaign-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg">Guardar Campaña</button>
                </div>
                 <div id="form-feedback" class="text-center mt-4 h-5"></div>
            </form>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN ---
        const SPREADSHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRYUnrbK7por8Ne8LqtHQk4GHFqvG82OPfHhrqy094vfGL_PAp9Ke5Muf-y5GCxTWJ2uzXTcXMVY-Tv/pub?output=csv';
        // URL de la aplicación web de Google Apps Script (versión de producción /exec)
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzf3N9N6O_K1t0UT9iDBEAA-04_rY7Z2X_TaWr2UUGYft7kukUmWNXvfjTW6LShTZJC/exec';

        // --- ESTADO DE LA APLICACIÓN ---
        let allUsersData = [];
        let loggedInUserData = null; // Almacena los datos del usuario logueado

        // --- ELEMENTOS DEL DOM ---
        const loginPage = document.getElementById('login-page');
        const dashboardPage = document.getElementById('dashboard-page');
        const loginForm = document.getElementById('login-form');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const errorMessage = document.getElementById('error-message');
        const logoutButton = document.getElementById('logout-button');
        const newCampaignBtn = document.getElementById('new-campaign-btn');
        const campaignModal = document.getElementById('campaign-modal');
        const modalContent = document.getElementById('modal-content');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const newCampaignForm = document.getElementById('new-campaign-form');
        const saveCampaignBtn = document.getElementById('save-campaign-btn');
        const formFeedback = document.getElementById('form-feedback');

        // --- LÓGICA DE DATOS ---
        async function fetchUsersData() {
            if (allUsersData.length > 0) return allUsersData;
            try {
                const response = await fetch(SPREADSHEET_URL);
                if (!response.ok) throw new Error(`Error de red: ${response.statusText}`);
                const csvText = await response.text();
                allUsersData = parseCSV(csvText);
                return allUsersData;
            } catch (error) {
                console.error('Error al obtener los datos de la hoja de cálculo:', error);
                errorMessage.textContent = 'No se pudo conectar con el servidor de datos.';
                return null;
            }
        }

        function parseCSV(csvText) {
            const rows = csvText.trim().split('\n');
            const headers = rows[0].split(',').map(h => h.trim());
            const users = [];
            const userIndex = headers.indexOf('User'), passIndex = headers.indexOf('Password'), nameIndex = headers.indexOf('Nombre'), whatsappIndex = headers.indexOf('WhatsApp'), cityIndex = headers.indexOf('Ciudad'), materialIndex = headers.indexOf('Material');
            for (let i = 1; i < rows.length; i++) {
                const values = rows[i].split(',').map(v => v.trim().replace(/"/g, ''));
                if (values.length >= headers.length && values[userIndex]) {
                    users.push({ user: values[userIndex], password: values[passIndex], nombre: values[nameIndex], whatsapp: values[whatsappIndex], ciudad: values[cityIndex], material: values[materialIndex] });
                }
            }
            return users;
        }

        // --- LÓGICA DE AUTENTICACIÓN Y VISTAS ---
        async function handleLogin(event) {
            event.preventDefault();
            errorMessage.textContent = '';
            const username = usernameInput.value.trim();
            const password = passwordInput.value.trim();
            if (!username || !password) {
                errorMessage.textContent = 'Por favor, ingresa usuario y contraseña.';
                return;
            }
            const users = await fetchUsersData();
            if (!users) return;
            const foundUser = users.find(u => u.user === username && u.password === password);
            if (foundUser) {
                loggedInUserData = foundUser; // Guarda los datos del usuario logueado
                showDashboard(foundUser);
            } else {
                errorMessage.textContent = 'Usuario o contraseña incorrectos.';
                loginForm.reset();
                usernameInput.focus();
            }
        }

        function showDashboard(userData) {
            document.getElementById('welcome-message').textContent = `Bienvenido de nuevo, ${userData.nombre || 'Usuario'}`;
            document.getElementById('user-name-display').textContent = userData.nombre || 'N/A';
            document.getElementById('user-city-display').textContent = userData.ciudad || 'N/A';
            document.getElementById('user-whatsapp-display').textContent = userData.whatsapp || 'N/A';
            document.getElementById('user-city-display-card').textContent = userData.ciudad || 'N/A';
            document.getElementById('user-material-display').textContent = userData.material || 'N/A';
            if (userData.user.toLowerCase() === 'admin') {
                newCampaignBtn.classList.remove('hidden');
            } else {
                newCampaignBtn.classList.add('hidden');
            }
            loginPage.classList.add('hidden');
            dashboardPage.classList.remove('hidden');
        }

        function handleLogout() {
            loggedInUserData = null; // Limpia los datos del usuario al salir
            loginForm.reset();
            errorMessage.textContent = '';
            dashboardPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        }

        // --- LÓGICA DEL MODAL Y AUTOCOMPLETE ---
        function setupAutocomplete(inputEl, suggestionsEl, data, onSelectCallback) {
            inputEl.addEventListener('input', () => {
                const value = inputEl.value.toLowerCase();
                suggestionsEl.innerHTML = '';
                if (value.length === 0) {
                    suggestionsEl.classList.add('hidden');
                    return;
                }
                const filteredData = data.filter(item => item.toLowerCase().includes(value));

                if (filteredData.length > 0) {
                    filteredData.forEach(item => {
                        const suggestionItem = document.createElement('div');
                        suggestionItem.classList.add('p-2', 'hover:bg-blue-600', 'cursor-pointer', 'text-white');
                        suggestionItem.textContent = item;
                        suggestionItem.addEventListener('click', () => {
                            inputEl.value = item;
                            suggestionsEl.classList.add('hidden');
                            if (onSelectCallback) {
                                onSelectCallback(item);
                            }
                        });
                        suggestionsEl.appendChild(suggestionItem);
                    });
                    suggestionsEl.classList.remove('hidden');
                } else {
                    suggestionsEl.classList.add('hidden');
                }
            });
        }

        function updateAdvisorInfo(selectedAdvisorName) {
            const whatsappInput = document.getElementById('whatsapp-display-modal');
            const materialInput = document.getElementById('material-designer');
            const cityInput = document.getElementById('city-input');
            const registeringUserInput = document.getElementById('registering-user');
            
            const selectedUser = allUsersData.find(u => u.nombre === selectedAdvisorName);
            
            if (selectedUser) {
                whatsappInput.value = selectedUser.whatsapp || '';
                materialInput.value = selectedUser.material || '';
                cityInput.value = selectedUser.ciudad || '';
                registeringUserInput.value = selectedUser.user || ''; // Rellena el usuario de la asesora
            } else {
                whatsappInput.value = '';
                materialInput.value = '';
                cityInput.value = '';
                registeringUserInput.value = '';
            }
        }

        function openModal() {
            if (!allUsersData.length) return;
            
            // Setup para Asesora
            const advisorInput = document.getElementById('advisor-input');
            const advisorSuggestions = document.getElementById('advisor-suggestions');
            const advisors = [...new Set(allUsersData.map(u => u.nombre).filter(Boolean))];
            setupAutocomplete(advisorInput, advisorSuggestions, advisors, updateAdvisorInfo);
            
            campaignModal.classList.remove('hidden');
            modalContent.classList.remove('modal-leave');
            modalContent.classList.add('modal-enter');
        }

        function closeModal() {
            modalContent.classList.remove('modal-enter');
            modalContent.classList.add('modal-leave');
            setTimeout(() => {
                campaignModal.classList.add('hidden');
                newCampaignForm.reset();
                updateAdvisorInfo('');
                formFeedback.textContent = '';
            }, 300);
        }

        async function handleCampaignSubmit(event) {
            event.preventDefault();
            saveCampaignBtn.disabled = true;
            formFeedback.textContent = 'Guardando...';
            formFeedback.classList.remove('text-green-400', 'text-red-400');
            formFeedback.classList.add('text-gray-400');
            const formatDate = (dateString) => {
                if (!dateString) return '';
                const [year, month, day] = dateString.split('-');
                return `${day}/${month}/${year}`;
            };
            const campaignData = {
                usuarioRegistrador: document.getElementById('registering-user').value,
                nombre: document.getElementById('campaign-name').value,
                tipoOferta: document.getElementById('offer-type').value,
                estado: document.getElementById('status').value,
                rendimiento: document.getElementById('performance').value,
                cpr: document.getElementById('cpr').value,
                asesora: document.getElementById('advisor-input').value,
                ciudad: document.getElementById('city-input').value,
                inicio: formatDate(document.getElementById('start-date').value),
                fin: formatDate(document.getElementById('end-date').value),
                material: document.getElementById('material-designer').value,
                whatsapp: document.getElementById('whatsapp-display-modal').value,
                fechaRegistro: new Date().toLocaleDateString('es-ES')
            };
            try {
                await fetch(APPS_SCRIPT_URL, { 
                    method: 'POST',
                    mode: 'no-cors',
                    redirect: 'follow',
                    headers: { 
                      'Content-Type': 'text/plain;charset=utf-8',
                    }, 
                    body: JSON.stringify(campaignData) 
                });

                formFeedback.textContent = '¡Campaña guardada con éxito!';
                formFeedback.classList.add('text-green-400');
                setTimeout(closeModal, 1500);

            } catch (error) {
                console.error('Error al enviar datos a Apps Script:', error);
                formFeedback.textContent = 'Error al guardar. Revisa la consola para más detalles.';
                formFeedback.classList.add('text-red-400');
            } finally {
                saveCampaignBtn.disabled = false;
            }
        }

        // --- EVENT LISTENERS ---
        loginForm.addEventListener('submit', handleLogin);
        logoutButton.addEventListener('click', handleLogout);
        newCampaignBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        newCampaignForm.addEventListener('submit', handleCampaignSubmit);
        document.addEventListener('click', (e) => {
            // Cierra el autocomplete si se hace clic fuera de él
            const advisorSuggestions = document.getElementById('advisor-suggestions');
            if (!e.target.closest('.relative')) {
                advisorSuggestions.classList.add('hidden');
            }
        });

    </script>
</body>
</html>
